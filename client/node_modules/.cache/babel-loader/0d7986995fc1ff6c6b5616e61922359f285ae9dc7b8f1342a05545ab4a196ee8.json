{"ast":null,"code":"const fetchData = async ({\n  url,\n  method = 'POST',\n  token = '',\n  body = null\n}, dispatch) => {\n  // Define headers\n  const headers = token ? {\n    'Content-Type': 'application/json',\n    authorization: `Bearer ${token}`\n  } : {\n    'Content-Type': 'application/json'\n  };\n\n  // Create options for fetch\n  const options = {\n    method,\n    headers,\n    // Include body only if method is not DELETE\n    ...(body && method !== 'DELETE' ? {\n      body: JSON.stringify(body)\n    } : {})\n  };\n  try {\n    // Perform the fetch request\n    const response = await fetch(url, options);\n\n    // Parse the JSON response\n    const data = await response.json();\n\n    // Check if the response is successful\n    if (!data.success) {\n      // Handle unauthorized access\n      if (response.status === 401) {\n        dispatch({\n          type: 'UPDATE_USER',\n          payload: null\n        });\n      }\n      // Throw error if response is not successful\n      throw new Error(data.message);\n    }\n\n    // Return the result if successful\n    return data.result;\n  } catch (error) {\n    // Dispatch an alert on error\n    dispatch({\n      type: 'UPDATE_ALERT',\n      payload: {\n        open: true,\n        severity: 'error',\n        message: error.message\n      }\n    });\n\n    // Log error to console\n    console.error(error);\n    return null;\n  }\n};\nexport default fetchData;","map":{"version":3,"names":["fetchData","url","method","token","body","dispatch","headers","authorization","options","JSON","stringify","response","fetch","data","json","success","status","type","payload","Error","message","result","error","open","severity","console"],"sources":["D:/place-to-stay-part6/client/src/actions/utils/fetchData.js"],"sourcesContent":["const fetchData = async (\n  { url, method = 'POST', token = '', body = null },\n  dispatch\n) => {\n  // Define headers\n  const headers = token\n    ? { 'Content-Type': 'application/json', authorization: `Bearer ${token}` }\n    : { 'Content-Type': 'application/json' };\n\n  // Create options for fetch\n  const options = {\n    method,\n    headers,\n    // Include body only if method is not DELETE\n    ...(body && method !== 'DELETE' ? { body: JSON.stringify(body) } : {})\n  };\n\n  try {\n    // Perform the fetch request\n    const response = await fetch(url, options);\n    \n    // Parse the JSON response\n    const data = await response.json();\n    \n    // Check if the response is successful\n    if (!data.success) {\n      // Handle unauthorized access\n      if (response.status === 401) {\n        dispatch({ type: 'UPDATE_USER', payload: null });\n      }\n      // Throw error if response is not successful\n      throw new Error(data.message);\n    }\n    \n    // Return the result if successful\n    return data.result;\n  } catch (error) {\n    // Dispatch an alert on error\n    dispatch({\n      type: 'UPDATE_ALERT',\n      payload: { open: true, severity: 'error', message: error.message },\n    });\n    \n    // Log error to console\n    console.error(error);\n    return null;\n  }\n};\n\nexport default fetchData;\n"],"mappings":"AAAA,MAAMA,SAAS,GAAG,MAAAA,CAChB;EAAEC,GAAG;EAAEC,MAAM,GAAG,MAAM;EAAEC,KAAK,GAAG,EAAE;EAAEC,IAAI,GAAG;AAAK,CAAC,EACjDC,QAAQ,KACL;EACH;EACA,MAAMC,OAAO,GAAGH,KAAK,GACjB;IAAE,cAAc,EAAE,kBAAkB;IAAEI,aAAa,EAAE,UAAUJ,KAAK;EAAG,CAAC,GACxE;IAAE,cAAc,EAAE;EAAmB,CAAC;;EAE1C;EACA,MAAMK,OAAO,GAAG;IACdN,MAAM;IACNI,OAAO;IACP;IACA,IAAIF,IAAI,IAAIF,MAAM,KAAK,QAAQ,GAAG;MAAEE,IAAI,EAAEK,IAAI,CAACC,SAAS,CAACN,IAAI;IAAE,CAAC,GAAG,CAAC,CAAC;EACvE,CAAC;EAED,IAAI;IACF;IACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAACX,GAAG,EAAEO,OAAO,CAAC;;IAE1C;IACA,MAAMK,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;IAElC;IACA,IAAI,CAACD,IAAI,CAACE,OAAO,EAAE;MACjB;MACA,IAAIJ,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QAC3BX,QAAQ,CAAC;UAAEY,IAAI,EAAE,aAAa;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;MAClD;MACA;MACA,MAAM,IAAIC,KAAK,CAACN,IAAI,CAACO,OAAO,CAAC;IAC/B;;IAEA;IACA,OAAOP,IAAI,CAACQ,MAAM;EACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd;IACAjB,QAAQ,CAAC;MACPY,IAAI,EAAE,cAAc;MACpBC,OAAO,EAAE;QAAEK,IAAI,EAAE,IAAI;QAAEC,QAAQ,EAAE,OAAO;QAAEJ,OAAO,EAAEE,KAAK,CAACF;MAAQ;IACnE,CAAC,CAAC;;IAEF;IACAK,OAAO,CAACH,KAAK,CAACA,KAAK,CAAC;IACpB,OAAO,IAAI;EACb;AACF,CAAC;AAED,eAAetB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}