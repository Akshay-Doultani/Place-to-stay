{"ast":null,"code":"var _jsxFileName = \"D:\\\\place-to-stay-part6\\\\client\\\\src\\\\components\\\\user\\\\GoogleOneTapLogin.js\",\n  _s = $RefreshSig$();\nimport { Google } from '@mui/icons-material';\nimport { Button } from '@mui/material';\nimport React, { useState } from 'react';\nimport { useValue } from '../../context/ContextProvider';\nimport { jwtDecode } from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleOneTapLogin = () => {\n  _s();\n  const {\n    dispatch\n  } = useValue();\n  const [disabled, setDisabled] = useState(false);\n  const handleResponse = response => {\n    const token = response.credential;\n    const decodedToken = jwtDecode(token);\n    const {\n      sub: id,\n      email,\n      name,\n      picture: photoURL\n    } = decodedToken;\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: {\n        id,\n        email,\n        name,\n        photoURL,\n        token,\n        google: true\n      }\n    });\n    dispatch({\n      type: 'CLOSE_LOGIN'\n    });\n  };\n  const handleGoogleLogin = () => {\n    setDisabled(true);\n    try {\n      window.google.accounts.id.initialize({\n        client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n        callback: handleResponse\n      });\n      window.google.accounts.id.prompt(notification => {\n        if (notification.isNotDisplayed()) {\n          throw new Error('Try to clear the cookies or try again later!');\n        }\n        if (notification.isSkippedMoment() || notification.isDismissedMoment()) {\n          setDisabled(false);\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: 'UPDATE_ALERT',\n        payload: {\n          open: true,\n          severity: 'error',\n          message: error.message\n        }\n      });\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Button, {\n    variant: \"outlined\",\n    startIcon: /*#__PURE__*/_jsxDEV(Google, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 18\n    }, this),\n    disabled: disabled,\n    onClick: handleGoogleLogin,\n    children: \"Login with Google\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleOneTapLogin, \"18ChwMKSsCQ87cdqlBaUpTAKGzc=\", false, function () {\n  return [useValue];\n});\n_c = GoogleOneTapLogin;\nexport default GoogleOneTapLogin;\nvar _c;\n$RefreshReg$(_c, \"GoogleOneTapLogin\");","map":{"version":3,"names":["Google","Button","React","useState","useValue","jwtDecode","jsxDEV","_jsxDEV","GoogleOneTapLogin","_s","dispatch","disabled","setDisabled","handleResponse","response","token","credential","decodedToken","sub","id","email","name","picture","photoURL","type","payload","google","handleGoogleLogin","window","accounts","initialize","client_id","process","env","REACT_APP_GOOGLE_CLIENT_ID","callback","prompt","notification","isNotDisplayed","Error","isSkippedMoment","isDismissedMoment","error","open","severity","message","console","log","variant","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","children","_c","$RefreshReg$"],"sources":["D:/place-to-stay-part6/client/src/components/user/GoogleOneTapLogin.js"],"sourcesContent":["import { Google } from '@mui/icons-material';\nimport { Button } from '@mui/material';\nimport React, { useState } from 'react';\nimport { useValue } from '../../context/ContextProvider';\nimport {jwtDecode} from 'jwt-decode';\n\nconst GoogleOneTapLogin = () => {\n  const { dispatch } = useValue();\n  const [disabled, setDisabled] = useState(false);\n\n  const handleResponse = (response) => {\n    const token = response.credential;\n    const decodedToken = jwtDecode(token);\n    const { sub: id, email, name, picture: photoURL } = decodedToken;\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: { id, email, name, photoURL, token, google: true },\n    });\n    dispatch({ type: 'CLOSE_LOGIN' });\n  };\n  const handleGoogleLogin = () => {\n    setDisabled(true);\n    try {\n      window.google.accounts.id.initialize({\n        client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n        callback: handleResponse,\n      });\n      window.google.accounts.id.prompt((notification) => {\n        if (notification.isNotDisplayed()) {\n          throw new Error('Try to clear the cookies or try again later!');\n        }\n        if (\n          notification.isSkippedMoment() ||\n          notification.isDismissedMoment()\n        ) {\n          setDisabled(false);\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: 'UPDATE_ALERT',\n        payload: { open: true, severity: 'error', message: error.message },\n      });\n      console.log(error);\n    }\n  };\n  return (\n    <Button\n      variant=\"outlined\"\n      startIcon={<Google />}\n      disabled={disabled}\n      onClick={handleGoogleLogin}\n    >\n      Login with Google\n    </Button>\n  );\n};\n\nexport default GoogleOneTapLogin;\n"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,qBAAqB;AAC5C,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,QAAQ,QAAQ,+BAA+B;AACxD,SAAQC,SAAS,QAAO,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAS,CAAC,GAAGN,QAAQ,CAAC,CAAC;EAC/B,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMU,cAAc,GAAIC,QAAQ,IAAK;IACnC,MAAMC,KAAK,GAAGD,QAAQ,CAACE,UAAU;IACjC,MAAMC,YAAY,GAAGZ,SAAS,CAACU,KAAK,CAAC;IACrC,MAAM;MAAEG,GAAG,EAAEC,EAAE;MAAEC,KAAK;MAAEC,IAAI;MAAEC,OAAO,EAAEC;IAAS,CAAC,GAAGN,YAAY;IAChEP,QAAQ,CAAC;MACPc,IAAI,EAAE,aAAa;MACnBC,OAAO,EAAE;QAAEN,EAAE;QAAEC,KAAK;QAAEC,IAAI;QAAEE,QAAQ;QAAER,KAAK;QAAEW,MAAM,EAAE;MAAK;IAC5D,CAAC,CAAC;IACFhB,QAAQ,CAAC;MAAEc,IAAI,EAAE;IAAc,CAAC,CAAC;EACnC,CAAC;EACD,MAAMG,iBAAiB,GAAGA,CAAA,KAAM;IAC9Bf,WAAW,CAAC,IAAI,CAAC;IACjB,IAAI;MACFgB,MAAM,CAACF,MAAM,CAACG,QAAQ,CAACV,EAAE,CAACW,UAAU,CAAC;QACnCC,SAAS,EAAEC,OAAO,CAACC,GAAG,CAACC,0BAA0B;QACjDC,QAAQ,EAAEtB;MACZ,CAAC,CAAC;MACFe,MAAM,CAACF,MAAM,CAACG,QAAQ,CAACV,EAAE,CAACiB,MAAM,CAAEC,YAAY,IAAK;QACjD,IAAIA,YAAY,CAACC,cAAc,CAAC,CAAC,EAAE;UACjC,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;QACjE;QACA,IACEF,YAAY,CAACG,eAAe,CAAC,CAAC,IAC9BH,YAAY,CAACI,iBAAiB,CAAC,CAAC,EAChC;UACA7B,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAO8B,KAAK,EAAE;MACdhC,QAAQ,CAAC;QACPc,IAAI,EAAE,cAAc;QACpBC,OAAO,EAAE;UAAEkB,IAAI,EAAE,IAAI;UAAEC,QAAQ,EAAE,OAAO;UAAEC,OAAO,EAAEH,KAAK,CAACG;QAAQ;MACnE,CAAC,CAAC;MACFC,OAAO,CAACC,GAAG,CAACL,KAAK,CAAC;IACpB;EACF,CAAC;EACD,oBACEnC,OAAA,CAACN,MAAM;IACL+C,OAAO,EAAC,UAAU;IAClBC,SAAS,eAAE1C,OAAA,CAACP,MAAM;MAAAkD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAE;IACtB1C,QAAQ,EAAEA,QAAS;IACnB2C,OAAO,EAAE3B,iBAAkB;IAAA4B,QAAA,EAC5B;EAED;IAAAL,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAAC5C,EAAA,CAlDID,iBAAiB;EAAA,QACAJ,QAAQ;AAAA;AAAAoD,EAAA,GADzBhD,iBAAiB;AAoDvB,eAAeA,iBAAiB;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}